name: Deploy and Promote Domain

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Vercel
        run: |
          echo "ðŸš€ Deploying to Vercel..."
          npx vercel --prod --force --yes
        env:
          VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
          
      - name: Promote production domain
        run: |
          echo "ðŸ“¢ Promoting shivansh-sharma.vercel.app as production..."
          npx vercel promote --target production https://shivansh-portfolio-l503zdxis-shivansh-sharmas-projects-e8c05f0b.vercel.app --yes
          echo "âœ… Production promotion complete"
        env:
          VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}

permissions:
  contents: read
  id-token: write
